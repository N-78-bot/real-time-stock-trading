# 요구사항 정의서 (Requirements)

## 📋 프로젝트 개요

### 프로젝트 명
실시간 주식/코인 모의투자 시스템

### 목적
- 대용량 트래픽 처리 능력 향상
- AWS 인프라 설계 및 운영 경험
- 실시간 데이터 처리 기술 습득
- Spring Boot 기반 백엔드 개발 역량 강화

### 개발 기간
2025.01.28 ~ 2025.04.15 (약 2.5개월 / 10주)

> **기간 재조정 사유 (2025.01.29):**  
> Kubernetes(EKS) 추가로 학습량 증가. 각 기술 스택을 제대로 학습하고 적용하려면 시간이 더 필요.  
> - **Week 1-2:** Docker + K8s 기초 (minikube)  
> - **Week 3-4:** 인증/인가 (JWT, Spring Security)  
> - **Week 5-6:** 실시간 기능 (WebSocket, Redis)  
> - **Week 7-8:** 주문 + 동시성 제어  
> - **Week 9-10:** EKS 배포 + 대용량 트래픽 처리  
> - 에러 만나고 해결하는 과정 문서화 시간 확보  
> - 면접에서 "왜 K8s 썼어요?"에 제대로 답변하려면 충분한 이해 필요

---

## 🎯 핵심 목표

### 기술적 목표
1. **동시 접속 1만명 이상 처리**
   - WebSocket 연결 유지
   - Redis 캐싱으로 응답 속도 개선

2. **실시간 시세 업데이트 (1초 이내)**
   - 외부 API(업비트, 한국투자증권) 연동
   - Redis Pub/Sub으로 브로드캐스팅

3. **주문 동시성 제어**
   - 잔고 부족 방지
   - Race Condition 해결

4. **AWS 인프라 자동화**
   - Docker + GitHub Actions CI/CD
   - Auto Scaling 설정

---

## 📌 기능 요구사항

### 1. 사용자 관리
- [ ] 회원가입 / 로그인 (JWT)
- [ ] 초기 가상 자산 100만원 지급
- [ ] 보유 자산 조회
- [ ] 거래 내역 조회

### 2. 실시간 시세
- [ ] 코인/주식 실시간 가격 조회
- [ ] WebSocket으로 1초마다 업데이트
- [ ] 차트 데이터 제공 (1분봉, 5분봉)
- [ ] 호가창 표시 (매수/매도 상위 10개)

### 3. 주문 기능
- [ ] 시장가 매수/매도
- [ ] 지정가 매수/매도 (예약 주문)
- [ ] 주문 취소
- [ ] 체결 내역 실시간 알림

### 4. 포트폴리오
- [ ] 보유 종목 목록
- [ ] 수익률 계산 (실시간)
- [ ] 자산 변동 그래프

### 5. 랭킹 시스템
- [ ] 전체 사용자 수익률 순위
- [ ] 일간/주간 TOP 10

---

## ⚙️ 비기능 요구사항

### 성능
- 시세 조회 응답 시간: **100ms 이하**
- 주문 처리 시간: **500ms 이하**
- 동시 접속자 처리: **10,000명 이상**
- WebSocket 연결 유지율: **99% 이상**

### 확장성
- 서버 수평 확장 가능 (Stateless)
- Redis 클러스터 지원
- DB Read Replica 구성

### 보안
- JWT 토큰 인증
- SQL Injection 방지 (PreparedStatement)
- XSS 방지 (입력 값 검증)
- Rate Limiting (API 호출 제한)

### 가용성
- 서버 다운타임: **월 1시간 이내**
- Health Check 구현
- CloudWatch 모니터링

---

## 🚫 제외 사항 (Out of Scope)

> **우선순위 조정 (2025.01.29):**  
> 2개월 안에 모든 걸 다 하긴 무리. 핵심 기능에 집중하고 나머지는 Phase 2로 미뤄야 현실적임.

### Phase 1에서 제외 (나중에 추가 가능)
- 실제 결제 시스템 ❌
- 모바일 앱 개발 ❌ (웹 먼저 완성)
- 실제 증권사 계좌 연동 ❌
- 소셜 로그인 (카카오, 구글) ❌ (일단 JWT 구현 먼저)
- 관리자 페이지 ❌ (사용자 기능 우선)
- 알림톡/푸시 알림 ❌ (WebSocket 알림으로 충분)

### 최소 구현 범위 (MVP)
- ✅ 회원가입/로그인 (JWT)
- ✅ 실시간 시세 조회 (WebSocket)
- ✅ 주문 기능 (시장가/지정가)
- ✅ 포트폴리오 조회
- ✅ 간단한 랭킹

---

## 📊 성공 지표 (KPI)

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 동시 접속자 처리 | 10,000명 | JMeter 부하 테스트 |
| 시세 업데이트 지연 | 1초 이내 | WebSocket 메시지 타임스탬프 |
| 주문 처리 성공률 | 99% 이상 | 로그 분석 |
| API 응답 시간 | 100ms 이하 | CloudWatch Metrics |

---

## 🗓️ 일정 (10주 계획)

| 기간 | 주차 | 작업 내용 |
|------|------|----------|
| Week 1-2 | 환경 구축 + K8s 기초 | Docker, minikube, Spring Boot 세팅, K8s 기본 개념 |
| Week 3-4 | 핵심 기능 개발 | 회원/인증, 입출금, REST API 구현 |
| Week 5-6 | 실시간 기능 | WebSocket, 업비트 API 연동, 실시간 시세 |
| Week 7-8 | 주문 + 동시성 | 주문 처리, 분산 락, 트랜잭션 제어 |
| Week 9-10 | EKS 배포 + 부하 테스트 | EKS 클러스터 구축, Auto Scaling, 대용량 트래픽 처리 |

> K8s 학습 시간을 고려하여 2주 추가

---

## 📝 변경 이력

| 날짜 | 내용 | 작성자 |
|------|------|--------|
| 2025-01-28 | 초안 작성 | N-78-bot |
| 2025-01-29 | K8s 추가로 기간 2.5개월로 재조정, 10주 일정 수립 | N-78-bot |

---

**다음 단계:**
- [ ] 기술 스택 선정 (tech-stack.md)
- [ ] 아키텍처 설계 (architecture.md)
- [ ] ERD 설계
- [ ] API 명세서 작성